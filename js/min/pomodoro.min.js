function renderTime(){$tl.css("transform","translateX(-"+pixelPos+"px)"),$tl.css("-ms-transform","translateX(-"+pixelPos+"px)"),$tl.css("-moz-transform","translateX(-"+pixelPos+"px)"),$tl.css("-webkit-transform","translateX(-"+pixelPos+"px)")}function doTick(){setTimeout(doTick,10);var e=Date.now()-lastTick;return lastTick=Date.now(),isDragging||0>=timePos?void(isTickPlaying&&(tickSound.stop(),isTickPlaying=!1)):(isTickPlaying||(tickSound.play(),isTickPlaying=!0),timePos-=e,timePos=Math.max(0,Math.min(timePos,secondsWidth*timeMultiplier)),pixelPos=timePos/secondsWidth*pixelWidth/timeMultiplier,renderTime(),void(0==timePos&&(wiggle($(".main")),ringSound.stop().play())))}function wiggle(e){TweenMax.fromTo(e,.07,{x:-4},{x:4,ease:Power1.easeInOut,yoyo:!0,repeat:21,onCompleteParams:[e],onComplete:resetWiggle})}function resetWiggle(e){TweenMax.to(e,.05,{x:0,ease:Power1.easeInOut})}function checkTime(e){return 10>e&&(e="0"+e),e}function pomodoro(){clearInterval(counter),count=9e4,turnSound.play(),document.getElementById("timer").innerHTML="25:00:00",document.getElementById("start-pause").innerHTML="Start",$("#start-pause").removeClass("hide"),$("#pause").addClass("hide"),$(".f-row2").addClass("hide"),$(".f-row1").removeClass("hide")}function shortRest(){clearInterval(counter),count=18e3,turnSound.play(),document.getElementById("timer").innerHTML="05:00:00",document.getElementById("start-pause").innerHTML="Start",$("#start-pause").removeClass("hide"),$("#pause").addClass("hide"),$(".f-row2").addClass("hide"),$(".f-row1").removeClass("hide")}function longRest(){clearInterval(counter),count=54e3,turnSound.play(),document.getElementById("timer").innerHTML="15:00:00",document.getElementById("start-pause").innerHTML="Start",$("#start-pause").removeClass("hide"),$("#pause").addClass("hide"),$(".f-row2").addClass("hide"),$(".f-row1").removeClass("hide")}function start(){countDown(),document.getElementById("start-pause").innerHTML="Start",tickSound.play(),$("#start-pause").addClass("hide"),$("#pause").removeClass("hide"),$(".f-row2").addClass("hide")}function pause(){clearInterval(counter),tickSound.stop(),document.getElementById("start-pause").innerHTML="Contuine",$("#start-pause").removeClass("hide"),$("#pause").addClass("hide")}function reset(){document.getElementById("timer").innerHTML="00:00:00",count=0,tickSound.stop(),clearInterval(counter),document.getElementById("start-pause").innerHTML="Start",$(".f-row2").removeClass("hide"),$(".f-row1").addClass("hide")}function countDown(){function e(){count-=1;var e=Math.floor(count%60),t=Math.floor(count/60%60),o=Math.floor(count/3600%60);return 0>=count?(clearInterval(counter),void(document.getElementById("timer").innerHTML="finished")):(console.log(count),o=checkTime(o),t=checkTime(t),e=checkTime(e),void(document.getElementById("timer").innerHTML=o+":"+t+":"+e))}counter&&clearTimeout(counter),counter=setInterval(e,10)}function digital(){$(".analog").addClass("hide"),$(".pomodoro").removeClass("hide")}function analog(){$(".pomodoro").addClass("hide"),$(".analog").removeClass("hide")}var $tl=$("#timeline"),$tm=$(".analog"),isDragging=!1,oldPosX=0,pixelPos=0,timePos=0,pixelWidth=630,secondsWidth=25,timeMultiplier=6e4,tickSound=new Howl({urls:["http://reneroth.org/projects/codepen/pomodoro_tick.ogg","http://reneroth.org/projects/codepen/pomodoro_tick.mp3"],loop:!0,volume:.3}),turnSound=new Howl({urls:["http://reneroth.org/projects/codepen/pomodoro_turn.ogg","http://reneroth.org/projects/codepen/pomodoro_turn.mp3"]}),isTickPlaying=!1,turnSoundDist=12.5,ringSound=new Howl({urls:["http://reneroth.org/projects/codepen/pomodoro_ring.ogg","http://reneroth.org/projects/codepen/pomodoro_ring.mp3"],volume:1});$tm.mousedown(function(e){e.preventDefault(),isDragging=!0});var lastTurnPos=0;$(document).mousemove(function(e){if(e.preventDefault(),isDragging){var t=e.pageX-oldPosX;pixelPos-=t,pixelPos=Math.max(0,Math.min(pixelPos,pixelWidth)),timePos=Math.ceil(pixelPos*secondsWidth/pixelWidth*timeMultiplier),renderTime(),t>0&&(lastTurnPos=e.pageX),e.pageX-lastTurnPos<-turnSoundDist&&(pixelWidth>pixelPos&&turnSound.play(),lastTurnPos=e.pageX)}else lastTurnPos=e.pageX;oldPosX=e.pageX}).mouseup(function(e){isDragging=!1});var lastTick=Date.now();doTick();var count,message,counter;